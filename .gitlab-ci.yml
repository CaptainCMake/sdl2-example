variables:
  CONAN_USER_HOME: "$CI_PROJECT_DIR"

stages:
  - build

before_script:
  - cmake --version
  - conan --version
  - conan remote add conan https://api.bintray.com/conan/stever/conan

windows:
  image: docker-windows-build:latest
  stage: build
  script:
    - (Get-WMIObject Win32_PhysicalMemory | Measure-Object Capacity -Sum).sum/1GB
    - cmd.exe /c build_windows.bat
  artifacts:
    paths:
      - build_windows/_package/*.zip
  tags:
    - windows-docker
